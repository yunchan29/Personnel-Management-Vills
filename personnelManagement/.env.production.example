# ======================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ======================================
# ⚠️ IMPORTANT: Copy this file to .env and fill in your production values
# ⚠️ NEVER commit your actual .env file with real credentials to version control

# Application Settings
APP_NAME="Personnel Management System"
APP_ENV=production
APP_KEY=base64:YOUR_32_CHAR_KEY_HERE  # Generate with: php artisan key:generate
APP_DEBUG=false  # ⚠️ CRITICAL: Must be false in production
APP_URL=https://yourdomain.com  # Use HTTPS

# Logging
LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=warning  # Options: emergency, alert, critical, error, warning, notice, info, debug

# Database Configuration
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=your_production_database
DB_USERNAME=your_db_username
DB_PASSWORD=your_secure_database_password  # Use strong password

# ======================================
# SECURITY SETTINGS
# ======================================

# Session Security
SESSION_DRIVER=database  # Recommended: database or redis
SESSION_LIFETIME=60  # Minutes (reduced for security)
SESSION_ENCRYPT=true  # ✅ CRITICAL: Must be true in production
SESSION_SECURE_COOKIE=true  # ✅ CRITICAL: Only send cookies over HTTPS
SESSION_HTTP_ONLY=true  # ✅ CRITICAL: Prevent JavaScript access to cookies
SESSION_SAME_SITE=lax  # Options: lax, strict, none
SESSION_PARTITIONED_COOKIE=false

# Cache Configuration
CACHE_DRIVER=redis  # Options: redis, memcached, file
CACHE_PREFIX=personnel_mgmt_

# Queue Configuration
QUEUE_CONNECTION=database  # Options: sync, database, redis

# Redis Configuration (if using redis for cache/sessions)
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=your_redis_password
REDIS_PORT=6379

# ======================================
# EMAIL CONFIGURATION
# ======================================

MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io  # Replace with your SMTP host
MAIL_PORT=587  # or 465 for SSL
MAIL_USERNAME=your_smtp_username
MAIL_PASSWORD=your_smtp_password
MAIL_ENCRYPTION=tls  # or ssl
MAIL_FROM_ADDRESS="noreply@yourdomain.com"
MAIL_FROM_NAME="${APP_NAME}"

# ======================================
# FILE STORAGE CONFIGURATION
# ======================================

FILESYSTEM_DISK=local  # Options: local, s3, public
AWS_ACCESS_KEY_ID=  # If using S3
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# ======================================
# SECURITY HEADERS & FEATURES
# ======================================

# Force HTTPS
FORCE_HTTPS=true

# Content Security Policy
CSP_ENABLED=true

# Rate Limiting (requests per minute)
THROTTLE_LOGIN=5  # Login attempts
THROTTLE_REGISTER=3  # Registration attempts
THROTTLE_PASSWORD_RESET=3  # Password reset requests
THROTTLE_API=60  # General API requests

# Account Lockout Settings
LOCKOUT_MAX_ATTEMPTS=5  # Failed login attempts before lockout
LOCKOUT_DURATION=15  # Lockout duration in minutes

# Password Reset Settings
PASSWORD_RESET_EXPIRY=15  # Token expiry in minutes
PASSWORD_RESET_MAX_PER_HOUR=3  # Max reset requests per email per hour

# File Upload Limits (in KB)
MAX_UPLOAD_SIZE=5120  # 5MB for resumes
MAX_PROFILE_PICTURE_SIZE=5120  # 5MB for profile pictures
MAX_DOCUMENT_SIZE=2048  # 2MB for other documents

# ======================================
# THIRD-PARTY SERVICES
# ======================================

BROADCAST_DRIVER=log
FILESYSTEM_DISK=local

PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_HOST=
PUSHER_PORT=443
PUSHER_SCHEME=https
PUSHER_APP_CLUSTER=mt1

VITE_APP_NAME="${APP_NAME}"
VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_HOST}"
VITE_PUSHER_PORT="${PUSHER_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"
VITE_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

# ======================================
# MONITORING & ANALYTICS
# ======================================

# Sentry Error Tracking (optional)
SENTRY_LARAVEL_DSN=
SENTRY_TRACES_SAMPLE_RATE=1.0

# Google Analytics (optional)
GOOGLE_ANALYTICS_ID=

# ======================================
# BACKUP & MAINTENANCE
# ======================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=daily  # daily, weekly, monthly
BACKUP_RETENTION_DAYS=30

# Maintenance Mode
MAINTENANCE_MODE=false

# ======================================
# NOTES FOR DEPLOYMENT
# ======================================
#
# 1. Generate Application Key:
#    php artisan key:generate
#
# 2. Run Database Migrations:
#    php artisan migrate --force
#
# 3. Run Login Attempts Migration:
#    php artisan migrate --path=/database/migrations/2025_11_07_030031_create_login_attempts_table.php
#
# 4. Clear and Cache Configuration:
#    php artisan config:cache
#    php artisan route:cache
#    php artisan view:cache
#
# 5. Create Storage Symlink:
#    php artisan storage:link
#
# 6. Set Proper Permissions:
#    chmod -R 755 storage
#    chmod -R 755 bootstrap/cache
#
# 7. Configure Web Server:
#    - Point document root to /public
#    - Enable HTTPS with valid SSL certificate
#    - Configure PHP settings (memory_limit, upload_max_filesize, etc.)
#
# 8. Enable Cron for Scheduled Tasks:
#    * * * * * cd /path-to-project && php artisan schedule:run >> /dev/null 2>&1
#
# 9. Configure Firewall:
#    - Allow only ports 80 (HTTP) and 443 (HTTPS)
#    - Restrict database port access
#
# 10. Security Checklist:
#     ✓ APP_DEBUG=false
#     ✓ SESSION_ENCRYPT=true
#     ✓ SESSION_SECURE_COOKIE=true
#     ✓ HTTPS enabled with valid certificate
#     ✓ Strong database password
#     ✓ Strong Redis password (if applicable)
#     ✓ .env file permissions set to 600
#     ✓ Database backups scheduled
#     ✓ Error logging configured
#     ✓ Rate limiting enabled
#     ✓ File upload restrictions configured
